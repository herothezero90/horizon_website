/* eslint-disable no-undef */
const projectCards = [
  {
    title: "Text to speech conversion web application",
    link: "https://cumulustalk.com/welcome.html",
    description: `Web app to sell products as addition to existing dating site.
Web application that implements google API to convert written text to downloadable mp3 audio record. User can select language, male/female voice, voice type, voice pitch and voice speed to gain audio that suits their needs.
Users can also add SSML markups to written text to achieve better quality of audio in advance settings panel.
Statisctics panel displays history of users selections.
Lenght of text, option to store text and audio data, count of conversions and usage of advnace settings panel are limited and depending on subscription type.`,
    tech: "HTML, CSS, Bootstrap, JavaScript, PHP, Yii, MySQL",
    images: [
      "./images/autodesk_2.png",
      "./images/autodesk_2.png",
      "./images/autodesk_2.png",
      "./images/autodesk_2.png",
      "./images/autodesk_2.png"
    ]
  },
  {
    title: "Dating Site Store Integration",
    link: null,
    description: `Web app to sell products as addition to existing dating site.
Full stack development
HTML, CSS, Bootstrap, JavaScript, PHP, Yii, MySQL
QR code generator
QR code reader and redeem system
Yii(PHP framework) template adjustments for admin

Web app for merchants to upload products to existing dating site.
Sell of products on dating site with QR code generated for each purchase.
Physical products are sold in stores by redeem of QR code.`,
    tech: "HTML, CSS, Bootstrap, JavaScript, PHP, Yii, MySQL",
    images: [
      "./images/autodesk_2.png",
      "./images/autodesk_2.png",
      "./images/autodesk_2.png",
      "./images/autodesk_2.png",
      "./images/autodesk_2.png"
    ]
  },
  {
    title: "3D Model Rendering Platform",
    link: null,
    description: `Web app for 3D rendering of autoCAD models with Autodesk SDK.

Full stack development
HTML, CSS, JavaScript, PHP, MySQL
Autodesk PHP SDK
PayPal

Option to add logo on rendered models.
User management based on subscription plan.
Admin panel, user panel and option to share rendered models.`,
    tech: "HTML, CSS, JavaScript, PHP, MySQL, Autodesk PHP SDK, PayPal",
    images: [
      "./images/autodesk_2.png",
      "./images/autodesk_2.png",
      "./images/autodesk_2.png",
      "./images/autodesk_2.png",
      "./images/autodesk_2.png"
    ]
  },
  {
    title: "Stripe Integration (Connected Accounts)",
    link: "https://cumulusgate.com/welcome.php",
    description: `Payment integration
Stripe PHP SDK

Connected accounts for customers
Through interface clients can create Stripe connected accounts to sell software in developers area on web app.
Owner of site can collect fee from purchases made through connected Stripe accounts.`,
    tech: "Stripe PHP SDK",
    images: [
      "./images/autodesk_2.png",
      "./images/autodesk_2.png",
      "./images/autodesk_2.png",
      "./images/autodesk_2.png",
      "./images/autodesk_2.png"
    ]
  },
  {
    title: "Zammad Ticket Automation",
    link: null,
    description: `API integration
Zammad API Client PHP

Webscraping

Automation of company workflow.
Connection of Zammad ticketing system to custom developed PHP script via webhooks.
PHP Script includes webscraping from third party websites and return of processed data to Zammad tickets.`,
    tech: "Zammad API Client PHP",
    images: [
      "./images/autodesk_2.png",
      "./images/autodesk_2.png",
      "./images/autodesk_2.png",
      "./images/autodesk_2.png",
      "./images/autodesk_2.png"
    ]
  },
  {
    title: "Flight Data Visualization",
    link: null,
    description: `Full stack development
HTML, CSS, JavaScript, Bootstrap, React, node.js, Express
React + ThreeJS globe
Web socket based chat
Flightlab API
Google places

Chat, flight search, data visualization, Google Places API to autocomplete user entries.
Due to NDA details are not presented.`,
    tech: "React, ThreeJS, Node.js, Express, WebSockets, Google Places, Flightlab API",
    images: [
      "./images/autodesk_2.png",
      "./images/autodesk_2.png",
      "./images/autodesk_2.png",
      "./images/autodesk_2.png",
      "./images/autodesk_2.png"
    ]
  },
  {
    title: "Interactive Multimedia Show Editor",
    link: null,
    description: `Full stack development
HTML, CSS, JavaScript, Bootstrap, node.js, Express
Socket.io
Audio outputs
OSC messages
Chat
Multidisplays and clients communication via web socket
Audience interaction with smartphones

Application for creation and control of multimedia shows.
Audience connected to server to interact with displays on stage.
Editor with possibility to add image, video, live stream, audio, text, QR code content.All media elements can be edited(colors, sizes, backgrounds...).
Elements presented as layers similar to Photoshop.
Two classic games that audience can control with their smartphone.`,
    tech: "Node.js, Express, Socket.io, OSC, HTML, CSS, JS",
    images: [
      "./images/autodesk_2.png",
      "./images/autodesk_2.png",
      "./images/autodesk_2.png",
      "./images/autodesk_2.png",
      "./images/autodesk_2.png"
    ]
  },
  {
    title: "Advent Calendar Game",
    link: "https://formation.stepforward-education.fr/",
    description: `Full stack development
HTML, CSS, Bootstrap, JavaScript, PHP, MySQL
Crosswords
Image mapping
Track of user progress

Interactive advent calendar with games for kids to learn English.
Games with writing answers, listening for audio extracts, crosswords, drag and drop games, lots of clickable areas.
Checking of correct answers and track of user progress.`,
    tech: "HTML, CSS, Bootstrap, JavaScript, PHP, MySQL",
    images: [
      "./images/autodesk_2.png",
      "./images/autodesk_2.png",
      "./images/autodesk_2.png",
      "./images/autodesk_2.png",
      "./images/autodesk_2.png"
    ]
  },
  {
    title: "Alphabet Game for Kids",
    link: "https://formation.stepforward-education.fr/amazing-english/",
    description: `Full stack development
HTML, CSS, Bootstrap, JavaScript, PHP, MySQL
Game platform for multiuser accounts
Avatars, custom animation
HTML emails
Shopify API

Interactive games for kids to learn English.
Game is sold on Shopify.Purchases are connected to web app via Shopify API.
Upon purchase on Shopify, HTML email is sent to customer to create new account.
  Register / Login / Forgotten password system with paid single or multiuser accounts.`,
    tech: "HTML, CSS, Bootstrap, JavaScript, PHP, MySQL, Shopify API",
    images: [
      "./images/autodesk_2.png",
      "./images/autodesk_2.png",
      "./images/autodesk_2.png",
      "./images/autodesk_2.png",
      "./images/autodesk_2.png"
    ]
  }
];
const teamMembers = {
  core: [
    {
      name: "Dubravka Spoljaric",
      position: "Full Stack Developer",
      about: "Handles backend logic and API integrations. Loves building scalable systems.",
      image: "./images/dubravka.jpeg",
      links: {
        github: "https://github.com/somehorizonplaceholder",
        linkedin: "https://www.linkedin.com/in/dubravka-example"
      }
    },
    {

      name: "Karla Lenard",
      position: "Frontend Developer",
      about: "Focused on clean UI and seamless UX.Passionate about CSS art and web animation.",
      image: "./images/karla.jpg",
      links: {
        github: "https://github.com/karla-lenard",
        linkedin: "https://www.linkedin.com/in/karla-example"
      }
    }
  ],
  extended: [
    {
      name: "Ivona Lenard",
      position: "Social Media Manager",
      about: "Google Ads, Facebook, Instagram, TikTok",
      image: "./images/ivona.jpg",
      links: {
        linkedin: "https://www.linkedin.com/in/ivona-example"
      }
    },
    {
      name: "Mia Majstor",
      position: "UI/UX Designer (Clever Fox Design)",
      about: "Crafts intuitive interfaces and pixel-perfect designs.",
      image: "./images/mia.jpeg",
      links: {
        linkedin: "https://cleverfoxdesign.hr/en"
      }
    }
  ]
};

const cardTemplate = document.getElementById('card-template');

function renderProjectCard({ title, link, description, tech, images }) {
  const clone = cardTemplate.content.cloneNode(true);
  const id = title.toLowerCase().replace(/\s+/g, '-').replace(/[^\w-]/g, '');
  clone.querySelector('.card-wrapper').id = id;
  clone.querySelector('.card-title').innerHTML = title + (link ? ` <a href="${link}" target="_blank" class="text-sm underline text-primary">(View Site)</a>` : '');
  clone.querySelector('.description').textContent = description;

  const techList = tech.split(',').map(t => t.trim());
  const iconMap = {
    html: 'fab fa-html5',
    css: 'fab fa-css3-alt',
    javascript: 'fab fa-js',
    php: 'fab fa-php',
    mysql: 'fas fa-database',
    bootstrap: 'fab fa-bootstrap',
    yii: 'fas fa-code',
    stripe: 'fab fa-stripe',
    paypal: 'fab fa-cc-paypal',
    react: 'fab fa-react',
    'threejs': 'fas fa-cube',
    nodejs: 'fab fa-node',
    express: 'fas fa-server',
    socketio: 'fas fa-exchange-alt',
    osc: 'fas fa-wave-square',
    'google places': 'fas fa-map-marker-alt',
    shopify: 'fab fa-shopify',
    qr: 'fas fa-qrcode',
    api: 'fas fa-plug'
  };
  const swiperWrapper = clone.querySelector('.swiper-wrapper');
  images.forEach(img => {
    const slide = document.createElement('div');
    slide.className = 'swiper-slide p-2';
    slide.innerHTML = `<img src="${img}" class="rounded-md w-full h-auto" alt="Project Image"/>`;
    swiperWrapper.appendChild(slide);
  });

  // initialize Swiper for this card
  setTimeout(() => {
    new Swiper(clone.querySelector('.swiper-in-card'), {
      slidesPerView: 1,
      spaceBetween: 10,
      navigation: {
        nextEl: clone.querySelector('.swiper-button-next'),
        prevEl: clone.querySelector('.swiper-button-prev'),
      },
      pagination: {
        el: clone.querySelector('.swiper-pagination'),
        clickable: true,
      },
    });
  }, 0);

  const techIconsHTML = techList.map(t => {
    const key = t.toLowerCase().split(' ')[0];
    const icon = iconMap[key] || 'fas fa-tools';
    return `
      <div class="flex flex-col items-center text-center w-16">
        <i class="${icon} text-2xl mb-1"></i>
        <span class="text-xs">${t}</span>
      </div>
    `;
  }).join('');

  clone.querySelector('.tech').innerHTML = `
    <strong class="block mb-2">Technologies:</strong>
    <div class="flex flex-wrap gap-3">${techIconsHTML}</div>
  `;

  return clone;
}

function createTeamCard({ name, position, about, image, links }) {
  return `
    <div class="card team-card bg-base-100 w-80 shadow-sm mx-auto">
      <figure class="px-10 pt-10">
        <img 
          src="${image}" 
          alt="${name}" 
          class="rounded-xl w-36 h-36 object-cover" 
        />
      </figure>
      <div class="card-body items-center text-center">
        <h2 class="card-title">${name}</h2>
        <p class="text-sm mt-1">${position}</p>
        <p class="text-sm mt-3">${about}</p>
        <hr class="w-full my-3" />
        <div class="card-actions justify-center">
          <!-- If you only want LinkedIn + GitHub, do both. 
               If extended only has LinkedIn, you can conditionally check links here 
               or just show whichever you have. 
          -->
          ${links.github
      ? `<a href="${links.github}" target="_blank" class="mx-2"><i class="fab fa-github"></i></a>`
      : ''
    }
          ${links.linkedin
      ? `<a href="${links.linkedin}" target="_blank" class="mx-2"><i class="fab fa-linkedin"></i></a>`
      : ''
    }
        </div>
      </div>
    </div>
  `;
}

$(document).ready(function () {

  // theme toggle
  $('.theme-controller').on('change', function () {
    $('html').attr('data-theme', $(this).is(':checked') ? 'black' : 'lofi');
  });

  const $navButtons = $('[data-page]');
  const $loader = $('#loader');
  const $pageContent = $('#page-content');

  function loadPage(page) {
    $loader.removeClass('hidden');
    $pageContent.empty();

    setTimeout(() => {
      $loader.addClass('hidden');

      if (page === 'home') {
        const homepageContent = $('#homepage-content').html();
        $pageContent.html(homepageContent);
        // swiper init
        new Swiper(".mySwiper", {
          rewind: true,
          navigation: {
            nextEl: ".swiper-button-next",
            prevEl: ".swiper-button-prev",
          },
        });
      } else if (page === 'projects') {
        // Show loader, clear page content
        $loader.removeClass('hidden');
        $pageContent.empty();

        setTimeout(() => {
          // Hide loader
          $loader.addClass('hidden');

          // Optionally add a main heading
          $pageContent.append('<h2 class="text-5xl font-bold mb-4">PROJEKTI</h2>');

          // 1) Get each template by its unique ID
          const webSolutions = document.getElementById('web-solutions-template');
          const paymentIntegrations = document.getElementById('payment-integrations-template');
          const restApi = document.getElementById('rest-api-template');
          const dataViz = document.getElementById('api-data-visualization-template');

          // 2) Clone each template’s content
          const webSolutionsClone = webSolutions.content.cloneNode(true);
          const paymentIntegrationsClone = paymentIntegrations.content.cloneNode(true);
          const restApiClone = restApi.content.cloneNode(true);
          const dataVizClone = dataViz.content.cloneNode(true);

          // 3) Append them in any order you like
          $pageContent.append(webSolutionsClone);
          $pageContent.append(paymentIntegrationsClone);
          $pageContent.append(restApiClone);
          $pageContent.append(dataVizClone);

          // 4) Finally, append your dynamic project cards
          projectCards.forEach(cardData => {
            const cardElement = renderProjectCard(cardData);
            $pageContent.append(cardElement);
          });

        }, 500);
      } else if (page === 'about') {
        $pageContent.html(`
          <h2 class="text-3xl font-bold mb-6">Horizon Team</h2>
          <div id="core-team" class="team-grid mb-10"></div>
      
          <h2 class="text-2xl font-bold mb-4">Extended Team</h2>
          <div id="extended-team" class="team-grid"></div>
        `);

        teamMembers.core.forEach(member => {
          $('#core-team').append(createTeamCard(member));
        });
        teamMembers.extended.forEach(member => {
          $('#extended-team').append(createTeamCard(member));
        });
      }
    }, 500);
  }

  $navButtons.on('click', function () {
    const page = $(this).data('page');
    loadPage(page);
  });

  // Show home on initial load
  $('[data-page="home"]').trigger('click');
});